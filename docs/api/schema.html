<!DOCTYPE html>
<html lang="en">
<head>
<title>Geometry Schema</title>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../css/bootstrap.min.css">
<link rel="stylesheet" href="../css/custom.css">
</head>

<body>

<div class="container">

<h1>State and Geometry Schema</h1>

<p>Two Types of State: Key and Delta.<br />
<strong>KeyState</strong> is at /v3/nc/state/key.</p>
<pre><code>{
  'project': string,
  'workingstep': uint,
  'time_in_workingstep': 0,
  'geom': geomRef[]
}</code></pre>
<p><strong>DeltaState</strong> is at /v3/nc/state/delta</p>
<pre><code>{
  'project': string,
  'workingstep': uint,
  'time_in_workingstep': 0,
  'prev: '',
  'geom': geomRef[]
}</code></pre>
<p>Geom Types have <em>references</em> in the State file. They look like:</p>
<pre><code>{
  'id': uuid,
  geomType: uuid+'.json',
  &lt;'version':uint,&gt;
  'xform': double[16],
  'bbox': double[6],
  'usage': usageStr
}
geomType = &lt;'shell','polyline','dynamicShell'&gt;</code></pre>
<p>usageStr are specific to geomType:</p>
<pre><code>'shell' usageType = &lt;'asis','tobe','removal','cutter','fixture','machine'&gt;
'polyline' usageType = 'toolpath'
'dynamicShell' usageType = 'inprocess'</code></pre>
<p>Note that dynamicShell is the only one to include a ‘version’ property. <strong>shell</strong> is at /v3/nc/geometry/:id/shell</p>
<pre><code>{
  'id': uuid,
  'faces': face[],
  'precision': int,
  'normalsIndex': int[],
  'pointsIndex': int[],
  'values': int[]
}</code></pre>
<p>face:</p>
<pre><code>{
  'count': uint,
  'id': uint,
  'color': double[3]
}</code></pre>
<p><strong>polyline</strong> is at /v3/nc/geometry/:id/annotation</p>
<pre><code>{
  'colorsdata': colorData[],
  'lines': double[][]
}</code></pre>
<p>colorData:</p>
<pre><code>{
  'duration': uint,
  'data': double[3]
}</code></pre>
<p><strong>dynamicShell</strong> is at /v3/nc/geometry/dynamic/:prev</p>
<pre><code>{
  'id': uuid,
  'version': uint,
  'precision': int,
  'faces': face[],
  'normalsIndex': int[],
  'pointsIndex': int[],
  'values': int[],
  'remove': int[]
}</code></pre>



<script src="../js/jquery.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
</body>
</html>
